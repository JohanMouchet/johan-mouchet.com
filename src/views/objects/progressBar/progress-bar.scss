@import '../../../assets/styles/settings/_settings';
@import '../../../assets/styles/tools/_tools';

.o-progress-bar {
	margin: t-vertical-rhythm(1) 0;

	/** Tooltip on hover **/
	&--tooltip-hover {
		[data-progress-bar-tooltip] {
			&::before,
			&::after {
				opacity: 0;
				transform: translateY(
					t-vertical-rhythm(.25, 'em', t-modular-scale(-1))
				);
				transition: opacity .2s, transform .2s;
			}
		}
	}

	&--tooltip-hover:hover {
		[data-progress-bar-tooltip] {
			&::before,
			&::after {
				opacity: 1;
				transform: none;
			}
		}
	}

	/* Label and Total */
	&__label,
	&__total {
		display: inline-block;
		line-height: t-vertical-rhythm(1.25);
	}

	&__total {
		float: right;
		color: $s-color-text-dimmed;
	}

	/* Outer */
	&__container {
		$progress-bar-height: 12px;

		height: $progress-bar-height;
		width: 100%;
		padding: 2px;
		border: 2px solid $s-color-gray;
		clear: both;
		position: relative;

		@include t-wekkit-hdpi-small-dimension;
	}

	/* Filling */
	&__filling {
		position: relative;
		height: 100%;
		max-width: 100%;
		background-color: $s-color-secondary;
		border-radius: inherit;
		transition: width .5s ease-out;
		animation: progress-bar-filling-animation .5s ease-out both;
	}

	/** Tooltip **/
	[data-progress-bar-tooltip] {
		&::before,
		&::after {
			position: absolute;
			top: 100%;
			right: 0;
		}

		&::after {
			content: attr(data-progress-bar-tooltip);
			margin-top: .4em;
			padding: .3em .5em;
			border: 2px solid $s-color-text;
			background-color: $s-color-white;
			font-size: t-modular-scale(-1);
			white-space: nowrap;

			@include t-wekkit-hdpi-small-dimension;
		}

		&::before {
			content: '';

			@include t-arrow(bottom-right, currentColor, .4em);
		}
	}

	/*** Animation ***/
	@keyframes progress-bar-filling-animation {
		from {
			width: 0;
		}
	}
}
